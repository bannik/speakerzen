<html>
	<head>
		<title>Questions</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
		<script>
		var id=1;
		function post_Answer(choice){
			$.ajax({
					url: 'http://83.212.125.48/LaunchPad/post_answer.php',
					type: 'post',
					data: {choice: choice , id:id},
					success: function (data) {

					}
				});
		}
		function get_Question(){
						$.ajax({
							url: 'http://83.212.125.48/LaunchPad/get_question.php',
							type: 'GET',
							dataType: 'json',
							data:{q_id: id}
						})
						.done(function(data) {
							if(!data)
							{
								$('.title').html("<h3>Thank you for participating</h3>");
								$('.choices,.button').html("");
								$(".loader").css({
									display: 'none'
								});
							}
							else{
								$('.title').html('<h3>'+data["id"]+'. '+data["title"]+'</h3>');


								if(!data["choicec"]){
									$('.choices').html('<li><a href="#" data-choice="1"><img src="assets/img/button.png" alt="" class="non-active" data-choice="1">'+data["choicea"]+'</a></li><li><a href="#" data-choice="2"><img src="assets/img/button.png" alt="" class="non-active" data-choice="2">'+data["choiceb"]+'</a></li>');
								}
								else if(data["choicee"]){
									$('.choices').html('<li><a href="#" data-choice="1"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicea"]+'</a></li><li><a href="#" data-choice="2"><img src="assets/img/button.png" alt="" class="non-active">'+data["choiceb"]+'</a></li><li><a href="#" data-choice="3"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicec"]+'</a></li><li><a href="#" data-choice="4"><img src="assets/img/button.png" alt="" class="non-active">'+data["choiced"]+'</a></li><li><a href="#" data-choice="5"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicee"]+'</a></li>');
								}
								else if(data["choiced"]){
									$('.choices').html('<li><a href="#" data-choice="1"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicea"]+'</a></li><li><a href="#" data-choice="2"><img src="assets/img/button.png" alt="" class="non-active">'+data["choiceb"]+'</a></li><li><a href="#" data-choice="3"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicec"]+'</a></li><li><a href="#" data-choice="4"><img src="assets/img/button.png" alt="" class="non-active">'+data["choiced"]+'</a></li>');
								}
								else if(data["choicec"]){
									$('.choices').html('<li><a href="#" data-choice="1"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicea"]+'</a></li><li><a href="#" data-choice="2"><img src="assets/img/button.png" alt="" class="non-active">'+data["choiceb"]+'</a></li><li><a href="#" data-choice="3"><img src="assets/img/button.png" alt="" class="non-active">'+data["choicec"]+'</a></li>');
								}
								$(".loader").css({
									display: 'none'
								});
							}
						})
						.fail(function() {
							console.log("error");
						})
						.always(function() {
							console.log("complete");
						});}
			$(document).on('click','.button_submit',function () {
				var choice = $('.choices').find('img.active').data('choice');
				if(!choice){
					alert("please choose one answer");
				}
				else
				{
					id++;
					$(".loader").css({
								display: 'block'
							});
					post_Answer(choice,id);
					get_Question();
				}
			});
			$(document).on('click','.choices a',function () {
				$(".active").removeClass('active');
				$("img").addClass('non-active');
				$(this).children().removeClass('non-active');
				$(this).children().addClass('active');
			});

			$(document).ready(function($) {
				function lsTest(){
				    var test = 'test';
				    try {
				        localStorage.setItem(test, test);
				        localStorage.removeItem(test);
				        return true;
				    } catch(e) {
				        return false;
				    }
				}

				if(lsTest() === true){
				    // there is localstorage
				}else{
				    // there is no localstorage
				}
				get_Question();

				});
		</script>
	</head>
	<body>
	<div class="container">
		<div class="header">
				<h3>
					Google LaunchPad
				</h3>
		</div>
		<div class="loader"><img src="assets/img/ajax-loader.gif" alt="" ></div>
		<div class="title">
			<h3>

			</h3>
		</div>
		<div class="choices">

		</div>
		<div class="button">
			<a href="#" class="button_submit">SUBMIT</a>
		</div>

		<div class="footer">
				<p> Copyright Â© Google LaunchPad 2013 </p>
		</div>
	</div>
	</body>
</html>
